<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Recipe Website</title>
  <link rel="stylesheet" href="/css/reset-css.css"/>
  <link rel="stylesheet" href="/css/bootstrap.min.css"/>
  <link rel="stylesheet" type="text/css" href="/css/main.css"/>
  <script src="/js/jquery-3.5.1.slim.min.js"></script>
  <script src="/js/bootstrap.min.js"></script>
</head>

<body>

<header>
  <nav th:replace="~{fragments/commons::navigation}"></nav>
</header>
<div class="container-fluid">
  <h2 class="text-center text-white">Search for recipes</h2>
  <form
          th:method="GET"
          th:action="@{/recipes/search}"
          th:object="${searchRecipeDto}"
          class="form-inline"
          style="justify-content: center; margin-top: 50px;"
  >
    <div style="position: relative">
      <input
              th:field="*{name}"
              th:errorclass="is-invalid"
              class="form-control mr-sm-2"
              style="width: 280px;"
              type="search"
              placeholder="Recipe name..."
              aria-label="Search"
              id="name"
      />
      <input
              th:field="*{minTimeNeeded}"
              th:errorclass="is-invalid"
              class="form-control mr-sm-2"
              style="width: 280px;"
              type="search"
              placeholder="Min time needed..."
              aria-label="Search"
              id="minTimeNeeded"
      />
      <input
              th:field="*{maxTimeNeeded}"
              th:errorclass="is-invalid"
              class="form-control mr-sm-2"
              style="width: 280px;"
              type="search"
              placeholder="Max time needed..."
              aria-label="Search"
              id="maxTimeNeeded"
      />
      <small
              id="searchRecipeHelpInline"
              class="bg-danger text-light rounded invalid-feedback"
              style="width: 97%; position: absolute; padding: 3px 15px; text-align: center;"
      >
        Try writing something this time.
      </small>
    </div>
    <button class="btn btn-outline-info my-2 my-sm-0" type="submit">Search</button>
  </form>
</div>

<div class="row mx-2 mb-4 bg-custom border-custom">
  <h2 class="text-center text-white m-auto py-5" th:text="|Results for recipes with ${result}|"></h2>
</div>

<div class="card-group">

  <div    th:each="r : ${recipes}" th:object="${r}"
          class="col-sm-12 col-md-6 col-lg-3 mb-4">
    <div class="card h-100 bg-custom border-custom">
      <img class="card-img-top" th:src="*{pictureUrl}" alt="Card image cap">
      <div class="card-body">
        <h5 th:text="*{name}"
            class="card-title mb-0">Крем супа от картофи</h5>
        <p th:text="|Добавена от: *{author}|"
           class="card-text">Добавена от: Мария Иванова</p>
      </div>
      <div class="card-footer">
        <div class="d-flex flex-row">
          <div class="col-3 p-2 text-center">
            <p><i class="fa-regular fa-clock fa-2x"></i></p>
            <p th:text="|*{timeNeeded} мин|">45 мин</p>
          </div>
          <div class="col-3 p-2 text-center">
            <p><i class="fa-solid fa-bowl-rice fa-2x"></i></p>
            <p th:text="*{portions}">5</p>
          </div>



          <div th:switch="${r.category.name()}"
               class="col-3 p-2 text-center">
            <div th:case="'WITH_MEAT'">
              <p><i class="fa-solid fa-drumstick-bite fa-2x"></i></p>
              <p>Meat</p>
            </div><div th:case="'VEGAN'">
            <p><i class="fa-solid fa-seedling fa-2x"></i></p>
            <p>Vegan</p>
          </div>
            <div th:case="'VEGETARIAN'">
              <p><i class="fa-solid fa-egg fa-2x"></i></p>
              <p>Vegy</p>
            </div>
          </div>




          <div class="col-3 p-2 text-center">
            <p><i class="fa-solid fa-stairs fa-2x"></i></p>
            <p th:text="*{#strings.capitalize(#strings.toLowerCase(level))}">Лесна</p>
          </div>
        </div>
        <a th:href="@{/recipes/details/{id}(id=*{id})}" class="btn btn-secondary btn-sm mb-2">Details</a>
      </div>
    </div>
  </div>




</div>

<div>
  <footer></footer>
</div>

</body>
</html>